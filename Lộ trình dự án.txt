# Dự Án Kho Game Điều Khiển Bằng Cử Chỉ Tay Với MediaPipe - Lộ Trình Nhóm

## Tổng Quan Dự Án

Dự án này nhằm phát triển một kho lưu trữ ba trò chơi (Flappy Bird, Ninja và Chém Hoa Quả) sử dụng MediaPipe Hands để nhận diện cử chỉ tay và điều khiển. Các trò chơi sẽ được phát triển bằng thư viện Pygame, với giao diện người dùng được xây dựng bằng PyQt6, và tất cả được lập trình trong môi trường PyCharm. Người chơi sẽ có thể điều khiển các trò chơi bằng cử chỉ tay được ghi lại qua webcam, mang đến trải nghiệm chơi game tương tác mà không cần các thiết bị đầu vào truyền thống.

## Cơ Cấu Nhóm và Trách Nhiệm

### Nhóm 3 Thành Viên:
1. **Lập Trình Viên Pygame / Game**
   - Trách nhiệm chính: Phát triển trò chơi với Pygame
   - Phụ trách: Hỗ trợ tích hợp MediaPipe với Pygame

2. **Chuyên Gia Thị Giác Máy Tính / MediaPipe**
   - Trách nhiệm chính: Hệ thống nhận diện cử chỉ tay với MediaPipe
   - Phụ trách: Ánh xạ cử chỉ thành lệnh điều khiển trò chơi

3. **Quản Lý Dự Án / Lập Trình Viên PyQt6**
   - Trách nhiệm chính: Phát triển giao diện người dùng với PyQt6 và điều phối dự án
   - Phụ trách: Tích hợp các thành phần và kiểm thử

## Yêu Cầu Kỹ Thuật

### Công Nghệ Cốt Lõi
- **PyCharm**: IDE chính cho phát triển
- **Python**: Ngôn ngữ lập trình chính
- **MediaPipe Hands**: Để phát hiện và theo dõi điểm mốc bàn tay
- **Pygame**: Thư viện game để phát triển cả ba trò chơi
- **PyQt6**: Framework UI để xây dựng giao diện người dùng chính và menu
- **OpenCV**: Để xử lý video từ webcam (tích hợp với MediaPipe)
- **Git/GitHub**: Cho quản lý phiên bản và hợp tác

### Môi Trường Phát Triển
- PyCharm (IDE)
- Python 3.8+ đã cài đặt
- Webcam để kiểm thử
- Các gói phụ thuộc: Pygame, PyQt6, MediaPipe, OpenCV, NumPy

## Lộ Trình Dự Án (1,5 - 2 tháng)

### Giai Đoạn 1: Thiết Lập và Lập Kế Hoạch (1 tuần)
- [ ] **Tuần 1: Nghiên Cứu và Cài Đặt Môi Trường**
   - Cài đặt PyCharm và thiết lập môi trường Python cho tất cả thành viên
   - Cài đặt và kiểm tra các thư viện: Pygame, PyQt6, MediaPipe, OpenCV
   - Tạo dự án GitHub và thiết lập cấu trúc thư mục
   - Nghiên cứu tích hợp MediaPipe với Pygame
   - Thiết kế kiến trúc tổng thể của ứng dụng PyQt6 và các trò chơi Pygame
   - Xác định cử chỉ tay sẽ sử dụng cho từng trò chơi

### Giai Đoạn 2: Phát Triển Chức Năng Cốt Lõi (1-2 tuần)
- [ ] **Tuần 2: Tích Hợp MediaPipe và Phát Triển Khung Game**
   - Triển khai module nhận diện tay với MediaPipe và OpenCV
   - Tạo lớp tiện ích để chuyển đổi dữ liệu MediaPipe thành lệnh điều khiển
   - Phát triển khung cơ bản cho Pygame (vòng lặp game, xử lý sự kiện)
   - Tạo giao diện PyQt6 cơ bản với màn hình chọn game
   - Kiểm tra luồng làm việc tích hợp: PyQt6 → MediaPipe → Pygame

- [ ] **Tuần 3: Phát Triển Game Cơ Bản**
   - Phát triển phiên bản đơn giản của cả ba trò chơi với Pygame:
     - Flappy Bird: Cơ chế trọng lực, sprite chim, chướng ngại vật
     - Ninja Game: Di chuyển nhân vật, nền tảng, sprite cơ bản
     - Chém Hoa Quả: Sinh hoa quả, cơ chế cắt cơ bản
   - Tạo và tích hợp đồ họa tạm thời cho các trò chơi
   - Kiểm thử tích hợp điều khiển chuột/bàn phím (trước khi thêm điều khiển cử chỉ)

### Giai Đoạn 3: Phát Triển Game Song Song (2-3 tuần)
- [ ] **Tuần 4-5: Phát Triển Game Chuyên Sâu**
   - **Flappy Bird:**
     - Hoàn thiện cơ chế trò chơi trong Pygame
     - Triển khai điều khiển cử chỉ:
       - Vị trí tay để điều khiển độ cao của chim
     - Thêm đồ họa, âm thanh và giao diện người dùng
     - Tối ưu hóa hiệu suất và độ đáp ứng

   - **Ninja Game:**
     - Hoàn thiện cơ chế trò chơi trong Pygame
     - Triển khai điều khiển cử chỉ:
       - Di chuyển tay để điều khiển nhân vật
       - Cử chỉ cụ thể cho các đòn tấn công
     - Thêm đồ họa, âm thanh và giao diện người dùng
     - Tối ưu hóa phát hiện va chạm và tính năng tương tác

   - **Chém Hoa Quả:**
     - Hoàn thiện cơ chế trò chơi trong Pygame
     - Triển khai điều khiển cử chỉ:
       - Theo dõi tay cho chuyển động "lưỡi dao"
       - Phát hiện chuyển động cắt
     - Thêm đồ họa, âm thanh và giao diện người dùng
     - Tối ưu hóa phát hiện va chạm và tính điểm

- [ ] **Tuần 6: Hoàn Thiện và Tích Hợp Game**
   - Tiếp tục phát triển và hoàn thiện cả ba trò chơi
   - Hoàn thiện giao diện PyQt6 cho màn hình chính và chuyển đổi giữa các trò chơi
   - Tích hợp hệ thống điểm số và lưu điểm cao
   - Thêm tùy chọn cấu hình (hiệu chỉnh độ nhạy cử chỉ, âm lượng, v.v.)
   - Kiểm thử toàn diện và tối ưu hóa hiệu suất

### Giai Đoạn 4: Hoàn Thiện và Triển Khai (1 tuần)
- [ ] **Tuần 7-8: Hoàn Thiện và Triển Khai**
   - Kiểm thử toàn diện trên nhiều cấu hình phần cứng
   - Khắc phục lỗi và cải thiện trải nghiệm người dùng
   - Tối ưu hóa mã nguồn và hiệu suất
   - Thêm hướng dẫn sử dụng trong ứng dụng (hướng dẫn cử chỉ)
   - Hoàn thiện tài liệu kỹ thuật và hướng dẫn cài đặt
   - Đóng gói ứng dụng thành tệp thực thi (sử dụng PyInstaller)
   - Chuẩn bị trình diễn dự án

## Chi Tiết Triển Khai Từng Game

### Triển Khai Flappy Bird với Pygame
1. **Cơ Chế Cốt Lõi**:
   - Vật lý bay của chim (trọng lực và lực nâng) sử dụng Pygame
   - Hệ thống tạo ống và di chuyển theo Pygame.sprite
   - Phát hiện va chạm bằng Pygame.mask hoặc rect
   - Hệ thống tính điểm và lưu điểm cao

2. **Điều Khiển Cử Chỉ với MediaPipe**:
   - Theo dõi vị trí lòng bàn tay (landmark số 9) để điều khiển độ cao chim
   - Hoặc phát hiện cử chỉ vỗ tay để chim nhảy lên

3. **Cấu Trúc File**:
   - `flappy_bird/main.py`: Điểm vào của trò chơi
   - `flappy_bird/bird.py`: Lớp đối tượng chim
   - `flappy_bird/pipes.py`: Lớp sinh và quản lý ống
   - `flappy_bird/assets/`: Thư mục chứa hình ảnh và âm thanh

### Triển Khai Game Ninja với Pygame
1. **Cơ Chế Cốt Lõi**:
   - Di chuyển nhân vật và nhảy sử dụng Pygame.sprite
   - Quản lý cảnh và địa hình với Pygame.surface
   - Hệ thống kẻ thù và AI đơn giản
   - Cơ chế chiến đấu và tính điểm

2. **Điều Khiển Cử Chỉ với MediaPipe**:
   - Vị trí tay trái/phải để di chuyển nhân vật sang trái/phải
   - Cử chỉ đóng/mở bàn tay để nhảy
   - Cử chỉ vung tay để tấn công

3. **Cấu Trúc File**:
   - `ninja_game/main.py`: Điểm vào của trò chơi
   - `ninja_game/player.py`: Lớp nhân vật người chơi
   - `ninja_game/enemies.py`: Lớp kẻ thù
   - `ninja_game/levels.py`: Quản lý cấp độ và địa hình
   - `ninja_game/assets/`: Thư mục chứa hình ảnh và âm thanh

### Triển Khai Game Chém Hoa Quả với Pygame
1. **Cơ Chế Cốt Lõi**:
   - Hệ thống phóng hoa quả sử dụng Pygame.sprite
   - Phát hiện va chạm giữa đường cắt và hoa quả bằng Pygame.mask
   - Hiệu ứng cắt và vỡ hoa quả bằng Pygame.surface
   - Hệ thống combo và tính điểm

2. **Điều Khiển Cử Chỉ với MediaPipe**:
   - Theo dõi đường đi của ngón trỏ (landmark số 8) để tạo đường cắt
   - Phát hiện tốc độ di chuyển để xác định hiệu quả cắt
   - Sử dụng hai tay để tạo nhiều đường cắt cùng lúc

3. **Cấu Trúc File**:
   - `fruit_ninja/main.py`: Điểm vào của trò chơi
   - `fruit_ninja/fruits.py`: Lớp hoa quả và bom
   - `fruit_ninja/blade.py`: Lớp quản lý đường cắt
   - `fruit_ninja/effects.py`: Hiệu ứng hình ảnh và âm thanh
   - `fruit_ninja/assets/`: Thư mục chứa hình ảnh và âm thanh

## Tích Hợp MediaPipe với Pygame

1. **Xử Lý Video**:
   ```python
   import cv2
   import mediapipe as mp
   
   mp_hands = mp.solutions.hands
   hands = mp_hands.Hands(max_num_hands=2, min_detection_confidence=0.7)
   
   def get_hand_landmarks(frame):
       rgb_frame = cv2.cvtColor(frame, cv2.COLOR_BGR2RGB)
       results = hands.process(rgb_frame)
       return results.multi_hand_landmarks
   ```

2. **Chuyển Đổi Cử Chỉ Thành Lệnh Game**:
   ```python
   def process_gestures(hand_landmarks):
       if not hand_landmarks:
           return None
           
       # Lấy vị trí lòng bàn tay (landmark số 9)
       palm = hand_landmarks[0].landmark[9]
       
       # Chuyển đổi thành tọa độ trên màn hình
       x, y = int(palm.x * screen_width), int(palm.y * screen_height)
       
       # Định nghĩa lệnh game dựa trên vị trí
       commands = {"x": x, "y": y}
       
       # Thêm logic phát hiện cử chỉ khác
       
       return commands
   ```

3. **Tích Hợp Với Pygame**:
   ```python
   def game_loop():
       while running:
           # Xử lý video và lấy dữ liệu cử chỉ
           ret, frame = cap.read()
           hand_landmarks = get_hand_landmarks(frame)
           commands = process_gestures(hand_landmarks)
           
           # Cập nhật trạng thái game dựa trên lệnh
           if commands:
               update_game_state(commands)
               
           # Vẽ khung game
           draw_game()
           pygame.display.update()
   ```

## Tích Hợp PyQt6 với Pygame

1. **Cấu Trúc Ứng Dụng PyQt6**:
   ```python
   from PyQt6.QtWidgets import QApplication, QMainWindow, QStackedWidget
   from PyQt6.QtCore import QTimer
   
   class GameHub(QMainWindow):
       def __init__(self):
           super().__init__()
           self.stack = QStackedWidget()
           self.setCentralWidget(self.stack)
           
           # Thêm các màn hình khác nhau
           self.main_menu = MainMenuScreen(self)
           self.game_screen = GameScreen(self)
           
           self.stack.addWidget(self.main_menu)
           self.stack.addWidget(self.game_screen)
           
           # Hiển thị menu chính
           self.stack.setCurrentIndex(0)
   ```

2. **Nhúng Pygame vào PyQt6**:
   ```python
   from PyQt6.QtWidgets import QFrame
   from PyQt6.QtCore import Qt, QTimer
   import pygame
   
   class PygameFrame(QFrame):
       def __init__(self, parent):
           super().__init__(parent)
           self.timer = QTimer()
           self.timer.timeout.connect(self.update_pygame)
           self.game_active = False
           
       def start_game(self, game_name):
           # Khởi tạo pygame và game đã chọn
           pygame.init()
           self.surface = pygame.Surface((self.width(), self.height()))
           self.game_active = True
           self.current_game = load_game(game_name)
           self.timer.start(16)  # ~60 FPS
           
       def update_pygame(self):
           if self.game_active:
               # Cập nhật trạng thái game và vẽ
               self.current_game.update()
               self.current_game.draw(self.surface)
               # Chuyển đổi surface Pygame thành QImage và hiển thị
               self.update()
   ```

## Chiến Lược Kiểm Thử

1. **Kiểm Thử Đơn Vị**:
   - Kiểm tra module nhận diện cử chỉ với bộ dữ liệu mẫu
   - Kiểm tra từng thành phần game Pygame (vật lý, va chạm)
   - Kiểm tra các thành phần UI của PyQt6

2. **Kiểm Thử Tích Hợp**:
   - Kiểm tra tích hợp MediaPipe với Pygame
   - Kiểm tra tích hợp PyQt6 với Pygame
   - Kiểm tra chuyển đổi giữa các màn hình và trò chơi

3. **Kiểm Thử Người Dùng**:
   - Kiểm tra trải nghiệm người dùng với các điều kiện ánh sáng khác nhau
   - Kiểm tra độ nhạy cử chỉ với người dùng khác nhau (kích thước tay, tốc độ)
   - Kiểm tra hiệu suất trên các cấu hình phần cứng khác nhau

## Tài Nguyên và Tham Khảo

1. **Tài Liệu MediaPipe**:
   - [MediaPipe Hands](https://google.github.io/mediapipe/solutions/hands.html)
   
2. **Tài Liệu Pygame**:
   - [Pygame Documentation](https://www.pygame.org/docs/)
   
3. **Tài Liệu PyQt6**:
   - [PyQt6 Reference Guide](https://www.riverbankcomputing.com/static/Docs/PyQt6/)
   
4. **Tài Liệu PyCharm**:
   - [PyCharm Documentation](https://www.jetbrains.com/pycharm/documentation/)

## Giao Tiếp và Hợp Tác

- Họp nhóm hàng tuần (cập nhật tiến độ và lập kế hoạch)
- Họp đứng ngắn hàng ngày (15 phút)
- Sử dụng Git flow cho quản lý nhánh
- Pull request và code review trước khi merge

## Kết Luận

Lộ trình này cung cấp một cách tiếp cận có cấu trúc cho nhóm ba người để phát triển ba trò chơi điều khiển bằng cử chỉ tay sử dụng MediaPipe Hands, Pygame và PyQt6 trong khoảng thời gian 1,5 đến 2 tháng. Việc sử dụng PyCharm làm IDE chính sẽ hỗ trợ hiệu quả cho quá trình phát triển với các công cụ debug và tích hợp Git. Các thành viên trong nhóm cần làm việc chặt chẽ với nhau để đảm bảo việc tích hợp giữa MediaPipe, Pygame và PyQt6 diễn ra suôn sẻ.